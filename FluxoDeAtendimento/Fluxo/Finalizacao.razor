@page "/fluxo/finalizacao"
@inject FluxoDeAtendimento.Repositories.ContatoRepository ContatoRepo
@inject NavigationManager NavManager

<h4>Atendimento Finalizado!</h4>


<div class="bg-gray-50 p-4 rounded border mb-4" style="max-width:600px;">
    <p><strong>Nome:</strong> @contato.Nome</p>
    <p><strong>Usuário:</strong> @contato.Usuario</p>
    <p><strong>Administrador:</strong> @contato.Administrador</p>
    <p><strong>Situação:</strong> @contato.Situacao</p>
    <p><strong>Módulo: Cadastros</strong></p>
    <p><strong>• Cadastros de Pessoas</strong></p>
    <p><strong>Conclusão: </strong>@contato.Conclusao</p>
    <p><strong>• Finalização do atendimento</strong></p>
    @if (!string.IsNullOrWhiteSpace(ContatoRepo.ObterConclusao()))
    {
        <div class="mt-2 p-2 bg-gray-100 rounded border">
            <strong>Conclusão:</strong>
            <p>@ContatoRepo.ObterConclusao()</p>
        </div>
    }
</div>

}
@code {
    private FluxoDeAtendimento.Models.Contato? contato;

    protected override void OnInitialized()
    {
        contato = ContatoRepo.ObterContatoAtual();
        if (contato != null)
        {
            ContatoRepo.RegistrarEtapa("Finalizou atendimento em Cadastros - Pessoas");
        }
    }

    private void VoltarInicio() => NavManager.NavigateTo("/identificacao");
    private void FinalizarAtendimento()
{

        NavManager.NavigateTo("/fluxo/finalizacao");
}
}
@if (!string.IsNullOrWhiteSpace(ContatoRepo.ObterConclusao()))
{
    <div class="mt-2 p-2 bg-gray-100 rounded border">
        <strong>Conclusão:</strong>
        <p>@ContatoRepo.ObterConclusao()</p>
    </div>
}

<h4 class="mt-6 mb-2 text-lg font-semibold">Histórico de etapas</h4>
<ul class="list-disc pl-6">
    @foreach (var etapa in ContatoRepo.ObterHistorico())
    {
        <li>@etapa</li>
    }
</ul>